<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DimObl ‚Äî –ê–¥–º—ñ–Ω</title>

<style>
:root{
  --bg:#0f1115; --card:#171a21; --text:#e9eef7; --muted:#9aa7bd;
  --border:#2a3140; --btn:#21c55d; --btnText:#06120a;
  --btn2:#0f1218;
}
[data-theme="light"]{
  --bg:#f5f7fb; --card:#ffffff; --text:#0f172a; --muted:#5b677a;
  --border:#dbe3ef; --btn:#16a34a; --btnText:#ffffff;
  --btn2:#f3f6fb;
}

body{
  margin:0;
  font-family:system-ui,Segoe UI,Arial;
  background:var(--bg);
  color:var(--text);
}

.wrap{
  min-height:100vh;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:18px;
}

.card{
  width:min(520px,100%);
  background:var(--card);
  border:1px solid var(--border);
  border-radius:18px;
  padding:22px;
}

.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:14px;
}

.brand{
  font-weight:800;
  font-size:26px;
}

.muted{
  color:var(--muted);
  font-size:13px;
}

.grid{
  display:flex;
  flex-direction:column;
  gap:14px;
  margin-top:18px;
}


button{
  padding:16px;
  border-radius:14px;
  border:1px solid var(--border);
  background:var(--btn2);
  color:var(--text);
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  transition:.15s;
  text-align: left;
}

button:hover{
  transform:translateY(-1px);
  box-shadow:0 6px 20px rgba(0,0,0,.25);
}

button.main{
  background:var(--btn);
  color:var(--btnText);
  border:0;
}

.footer{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:18px;
}
</style>
</head>

<body>
<div class="wrap">
  <div class="card">

    <div class="top">
      <div>
        <div class="brand">üëë –ê–¥–º—ñ–Ω-–ü–∞–Ω–µ–ª—å</div>
        <div class="muted" id="user">‚Äî</div>
      </div>
      <button onclick="toggleTheme()">üåì</button>
    </div>

    <div class="grid">
      
      <button onclick="go('finance')">üí∞ –§–Ü–ù–ê–ù–°–ò</button>
      <button onclick="go('food')">üçΩ –á–ñ–ê</button>
      <button onclick="go('clothes')">üëï –û–î–Ø–ì</button>
      <button onclick="go('goals')">üéØ –¶–Ü–õ–Ü</button>
      <button onclick="go('tasks')">üìù –ó–ê–í–î–ê–ù–ù–Ø</button>
      <button onclick="go('notes')">üìå –ü–†–ò–ú–Ü–¢–ö–ò</button>
    </div>

    <div class="footer">
      <button onclick="logout()">–í–∏–π—Ç–∏</button>
      <button class="main" onclick="go('dashboard')">–ì–æ–ª–æ–≤–Ω–∞</button>
    </div>

  </div>
</div>

<script>
/* ====== AUTH ====== */
const API_URL = "https://script.google.com/macros/s/AKfycbyX9sLQl6M7HftZhA1WccI_uo6JmxGm1DzifsFmVp4BzPcZQSyd8HixmQ-_igGZeryu/exec";
const REQUIRED_ROLE = "admin";

function logout(){
  localStorage.clear();
  location.href = "index.html";
}

(async function checkAccess(){
  const token = localStorage.getItem("dimobl_token");
  if (!token) return logout();

  try{
    const r = await fetch(`${API_URL}?action=check&token=${encodeURIComponent(token)}`);
    const d = await r.json();

    if (d.status !== "OK") return logout();

    const role = String(d.role).toLowerCase().trim();
    if (role !== REQUIRED_ROLE) return logout();

    document.getElementById("user").textContent =
      `${d.name} (${role})`;

  }catch{
    logout();
  }
})();

/* ====== NAV ====== */
function go(section){
  alert("–ü–µ—Ä–µ—Ö—ñ–¥ —É —Ä–æ–∑–¥—ñ–ª: " + section);
  // —Ç—É—Ç –ø—ñ–∑–Ω—ñ—à–µ:
  // location.href = section + ".html";
}

/* ====== THEME ====== */
function applyTheme(t){
  document.documentElement.setAttribute("data-theme", t);
  localStorage.setItem("dimobl_theme", t);
}
function toggleTheme(){
  const cur = localStorage.getItem("dimobl_theme") || "dark";
  applyTheme(cur === "dark" ? "light" : "dark");
}
applyTheme(localStorage.getItem("dimobl_theme") || "dark");
</script>

</body>
</html>
