<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8">
<title>–ê–¥–º—ñ–Ω</title>
</head>
<body>

<h1>üëë –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å</h1>
<div id="user"></div>

<button onclick="logout()">–í–∏–π—Ç–∏</button>

<script>
const REQUIRED_ROLE = "admin";
</script>

<!-- ‚¨á –í–°–¢–ê–í –°–Æ–î–ò –ó–ê–ì–ê–õ–¨–ù–ò–ô –°–ö–†–ò–ü–¢ –ó –ü.2 -->

  <script>
const API_URL = "–¢–£–¢_–¢–í–Ü–ô_WEB_APP_EXEC_URL";
const REQUIRED_ROLE = "admin"; // ‚Üê –ú–Ü–ù–Ø–Ñ–¢–¨–°–Ø

async function checkAccess() {
  const token = localStorage.getItem("dimobl_token");
  const role  = localStorage.getItem("dimobl_role");
  const name  = localStorage.getItem("dimobl_name");

  if (!token || role !== REQUIRED_ROLE) return logout();

  try {
    const r = await fetch(`${API_URL}?action=check&token=${encodeURIComponent(token)}`);
    const d = await r.json();
    if (d.status !== "OK") return logout();

    document.getElementById("user").textContent = `${name} (${role})`;
  } catch {
    logout();
  }
}

function logout() {
  localStorage.clear();
  location.href = "index.html";
}

checkAccess();
</script>

  
</body>
</html>
